# Getting started

All of Meshia's core APIs are provided through [`MeshSimplifier`](~/api/Meshia.MeshSimplification.MeshSimplifier.html).

The `MeshSimplifier` has a stateless API provided by the `static` method and a stateful API for more advanced scenarios.

## Stateless API

```csharp

using Meshia.MeshSimplification;

Mesh simplifiedMesh = new();

// Asynchronous API

await MeshSimplifier.SimplifyAsync(originalMesh, target, options, simplifiedMesh);

// Synchronous API

MeshSimplifier.Simplify(originalMesh, target, options, simplifiedMesh);

```

## Stateful API

When processing asynchronously across multiple frames, use `Allocator.Persistent`.
`Allocator.TempJob` should be used even if processing is completed within one frame.(You cannot use `Allocator.Temp`.)

1. Create `MeshSimplifier` instance

2. Schedule load mesh data via[`MeshSimplifier.ScheduleLoadMeshData`](~/api/Meshia.MeshSimplification.MeshSimplifier.html#Meshia_MeshSimplification_MeshSimplifier_ScheduleLoadMeshData_Mesh_MeshData_Meshia_MeshSimplification_MeshSimplifierOptions_JobHandle_).

3. Load mesh blendshapes via [`BlendShapeData.GetMeshBlendShapes`](~/api/Meshia.MeshSimplification.BlendShapeData.html#Meshia_MeshSimplification_BlendShapeData_GetMeshBlendShapes_Mesh_AllocatorManager_AllocatorHandle_).

4. Schedule simplify via [`MeshSimplifier.ScheduleSimplify`](~/api/Meshia.MeshSimplification.MeshSimplifier.html#Meshia_MeshSimplification_MeshSimplifier_ScheduleSimplify_Mesh_MeshData_NativeList_Meshia_MeshSimplification_BlendShapeData__Meshia_MeshSimplification_MeshSimplificationTarget_JobHandle_).

5. Schedule write mesh data via[`MeshSimplifier.ScheduleWriteMeshData`](~/api/Meshia.MeshSimplification.MeshSimplifier.html#Meshia_MeshSimplification_MeshSimplifier_ScheduleWriteMeshData_Mesh_MeshData_NativeList_Meshia_MeshSimplification_BlendShapeData__Mesh_MeshData_NativeList_Meshia_MeshSimplification_BlendShapeData__JobHandle_).

Multiple LODs of a single mesh can be generated by repeating 4~5.

The implementation of [`MeshSimplifier.SimplifyAsync`](~/api/Meshia.MeshSimplification.MeshSimplifier.html#Meshia_MeshSimplification_MeshSimplifier_SimplifyAsync_Mesh_Meshia_MeshSimplification_MeshSimplificationTarget_Meshia_MeshSimplification_MeshSimplifierOptions_Mesh_System_Threading_CancellationToken_) 
and [the test code](https://github.com/RamType0/Meshia.MeshSimplification/blob/d2ab9e170db6f7c6bbf693dd205415178a06c857/Runtime/Tests/MeshSimplifierTests.cs#L42) will also be helpful.
